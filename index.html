<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Recall Game</title>
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        h1 {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 10px;
        }
        input, button {
            background-color: #1f1f1f;
            color: #e0e0e0;
            border: 1px solid #333;
            padding: 5px;
            margin-bottom: 15px;
            width: 100%;
        }
        button {
            padding: 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: #555;
        }
        /* Modal styles */
        #items-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
        }
        #items-modal-content {
            background-color: #1f1f1f;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            color: #e0e0e0;
            position: relative;
        }
        #items-modal-content ul {
            list-style-type: none;
            padding: 0;
            text-align: left;
        }
        #items-modal-content ul li {
            margin-bottom: 5px;
        }
        #close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #444;
            color: #fff;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        #game-area {
            display: none;
            margin-top: 20px;
        }
        .correct-items {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
        }
        .correct-items div {
            background-color: #1f1f1f;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #333;
        }

        /* Toast styles */
        #toast {
            visibility: hidden;
            min-width: 250px;
            margin-top: 10px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            padding: 16px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            transform: translateX(-50%);
            top: 10px;
            font-size: 16px;
        }
        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 3s;
        }
        @keyframes fadein {
            from {top: 0; opacity: 0;} 
            to {top: 10px; opacity: 1;}
        }
        @keyframes fadeout {
            from {top: 10px; opacity: 1;} 
            to {top: 0; opacity: 0;}
        }
    </style>
</head>
<body>

    <h1>Memory Recall Game</h1>

    <div id="menu">
        <label for="num-items">Number of items (10 to 100):</label>
        <input type="number" id="num-items" min="10" max="100" value="10">

        <label for="limit-guesses">Limit wrong guesses to 20% of items:</label>
        <input type="checkbox" id="limit-guesses">

        <button id="start-btn">Start Game</button>
    </div>

    <div id="game-area">
        <input type="text" id="guess-input" placeholder="Enter your guesses" autocomplete="off">
        <button id="reset-btn">Reset Game</button>

        <div class="correct-items" id="correct-items"></div>
    </div>

    <!-- Modal for showing the items -->
    <div id="items-modal">
        <div id="items-modal-content">
            <span id="close-modal">Close</span>
            <h2>Memorize these items:</h2>
            <ul id="items-list"></ul>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast"></div>

    <script>
        const itemsList = [
            "Toothbrush", "Toothpaste", "Soap", "Shampoo", "Conditioner", "Towel", "Toilet paper", "Razor", 
            "Deodorant", "Lotion", "Hairbrush", "Comb", "Nail clippers", "Cotton swabs", "Cotton balls", 
            "Face wash", "Sunscreen", "Lip balm", "Mouthwash", "Perfume", "Shampoo", "Dish soap", 
            "Sponges", "Paper towels", "Trash bags", "Laundry detergent", "Fabric softener", "Iron", 
            "Ironing board", "Vacuum cleaner", "Broom", "Dustpan", "Mop", "Bucket", "Cleaning spray", 
            "Spatula", "Cutting board", "Knife", "Pot", "Pan", "Oven mitts", "Measuring cups", 
            "Measuring spoons", "Whisk", "Can opener", "Peeler", "Colander", "Mixing bowl", 
            "Food storage containers", "Aluminum foil", "Plastic wrap", "Baking sheets", "Coffee maker", 
            "Coffee filters", "Teapot", "Kettle", "Blender", "Microwave", "Toaster", "Cutting knife", 
            "Grater", "Tupperware", "Ice cube tray", "Water bottle", "Lunchbox", "Thermos", "Scissors", 
            "Tape", "Glue", "Notebooks", "Pens", "Pencils", "Highlighters", "Sticky notes", "Stapler", 
            "Paper clips", "Rubber bands", "Calendar", "Phone charger", "Headphones", "Laptop", 
            "Tablet", "Remote control", "Light bulbs", "Extension cord", "First aid kit", "Flashlight", 
            "Batteries", "Umbrella", "Sunglasses", "Wallet", "Keys", "Backpack", "Watering can", 
            "Plant pots", "Garden gloves", "Bicycle pump", "Sports equipment", "Board games", "Books"
        ];

        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const gameArea = document.getElementById('game-area');
        const guessInput = document.getElementById('guess-input');
        const correctItemsContainer = document.getElementById('correct-items');
        const numItemsInput = document.getElementById('num-items');
        const limitGuessesCheckbox = document.getElementById('limit-guesses');
        const itemsModal = document.getElementById('items-modal');
        const itemsListElement = document.getElementById('items-list');
        const closeModalBtn = document.getElementById('close-modal');
        const toast = document.getElementById('toast');

        let correctItems = [];
        let shownItems = [];
        let wrongGuesses = 0;
        let maxWrongGuesses = 0;

        function showToast(message) {
            toast.innerHTML = message;
            toast.className = "show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3500);
        }

        function resetGame() {
            correctItems = [];
            shownItems = [];
            wrongGuesses = 0;
            correctItemsContainer.innerHTML = '';
            gameArea.style.display = 'none';
            numItemsInput.value = 10;
            limitGuessesCheckbox.checked = false;
            itemsModal.style.display = 'none';
        }

        function startGame() {
            const numItems = parseInt(numItemsInput.value);

            // Calculate maximum wrong guesses based on the checkbox
            maxWrongGuesses = limitGuessesCheckbox.checked ? Math.floor(numItems * 0.2) : Infinity;

            // Randomly select items from the list
            shownItems = itemsList.sort(() => 0.5 - Math.random()).slice(0, numItems);
            
            // Show the items in the modal for 1 minute
            itemsListElement.innerHTML = '';
            shownItems.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = item;
                itemsListElement.appendChild(listItem);
            });

            // Display the modal
            itemsModal.style.display = 'flex';
        }

        function closeModalAndStartGame() {
            itemsModal.style.display = 'none';
            gameArea.style.display = 'block';
            showToast("Start guessing!");

            guessInput.focus();
        }

        function checkGuess() {
            const guess = guessInput.value.trim().toLowerCase();
            if (guess === '') return;
            guessInput.value = '';

            if (shownItems.map(item => item.toLowerCase()).includes(guess)) {
                if (!correctItems.includes(guess)) {
                    correctItems.push(guess);
                    const correctItemElement = document.createElement('div');
                    correctItemElement.textContent = guess;
                    correctItemsContainer.appendChild(correctItemElement);
                    showToast(`Correct: ${guess}`);
                } else {
                    showToast(`Already guessed: ${guess}`);
                }

                if (correctItems.length === shownItems.length) {
                    showToast("You won!");
                    setTimeout(resetGame, 3000);
                }
            } else {
                wrongGuesses++;
                const remainingGuesses = maxWrongGuesses === Infinity ? 'infinite guesses left' : `${maxWrongGuesses - wrongGuesses} guesses left`;
                showToast(`Wrong: ${guess}. ${remainingGuesses}`);

                if (wrongGuesses >= maxWrongGuesses) {
                    showToast("Game over! You lost.");
                    setTimeout(resetGame, 3000);
                }
            }
        }

        // Event listeners
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        closeModalBtn.addEventListener('click', closeModalAndStartGame);
        guessInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkGuess();
            }
        });

    </script>

</body>
</html>
